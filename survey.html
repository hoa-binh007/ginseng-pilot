<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Survey</title>
  <link rel="stylesheet" href="app.css"/>
</head>
<body>
  <div class="wrap">
    <div class="row">
      <div class="small" data-vi="Kh·∫£o s√°t" data-en="Survey"></div>
      <div class="lang">
        <button id="btnVi" type="button">üáªüá≥</button>
        <button id="btnEn" type="button">üá¨üáß</button>
      </div>
    </div>

    <div class="card">
      <h1 data-vi="Kh·∫£o s√°t nhanh (14 c√¢u)" data-en="Quick survey (14 questions)"></h1>
      <p data-vi="Ch·ªçn nhanh. ·∫®n danh." data-en="Tap quickly. Anonymous."></p>

      <form id="surveyForm">

        <h2 data-vi="PH·∫¶N A ‚Äì C·∫¢M NH·∫¨N" data-en="PART A ‚Äì PERCEPTION"></h2>

        <div class="q">
          <div class="q-title" data-vi="Q1. V·ªã ƒë·∫Øng" data-en="Q1. Bitter taste"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q1_bitter" value="strong" required><span data-vi="ƒê·∫Øng r√µ" data-en="Strong"></span></label>
            <label class="choice"><input type="radio" name="q1_bitter" value="mild"><span data-vi="ƒê·∫Øng nh·∫π" data-en="Mild"></span></label>
            <label class="choice"><input type="radio" name="q1_bitter" value="hardly"><span data-vi="H·∫ßu nh∆∞ kh√¥ng ƒë·∫Øng" data-en="Hardly"></span></label>
            <label class="choice"><input type="radio" name="q1_bitter" value="none"><span data-vi="Kh√¥ng ƒë·∫Øng" data-en="Not bitter"></span></label>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q2. H·∫≠u v·ªã ng·ªçt nh·∫π?" data-en="Q2. Slight sweet aftertaste?"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q2_sweet" value="yes" required><span data-vi="C√≥" data-en="Yes"></span></label>
            <label class="choice"><input type="radio" name="q2_sweet" value="little"><span data-vi="C√≥ m·ªôt ch√∫t" data-en="A little"></span></label>
            <label class="choice"><input type="radio" name="q2_sweet" value="unsure"><span data-vi="Kh√¥ng ch·∫Øc" data-en="Not sure"></span></label>
            <label class="choice"><input type="radio" name="q2_sweet" value="no"><span data-vi="Kh√¥ng" data-en="No"></span></label>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q3. Nhi·ªÅu n∆∞·ªõc b·ªçt h∆°n?" data-en="Q3. More saliva?"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q3_saliva" value="yes_clear" required><span data-vi="C√≥, r√µ" data-en="Yes, clearly"></span></label>
            <label class="choice"><input type="radio" name="q3_saliva" value="yes_light"><span data-vi="C√≥, nh·∫π" data-en="Yes, a little"></span></label>
            <label class="choice"><input type="radio" name="q3_saliva" value="unsure"><span data-vi="Kh√¥ng ch·∫Øc" data-en="Not sure"></span></label>
            <label class="choice"><input type="radio" name="q3_saliva" value="no"><span data-vi="Kh√¥ng" data-en="No"></span></label>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q4. C·∫£m nh·∫≠n chung" data-en="Q4. Overall perception"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q4_type" value="health_machine" required><span data-vi="ƒê·ªì u·ªëng s·ª©c kh·ªèe, ti·ªán l·ª£i (pha b·∫±ng m√°y)" data-en="Convenient health drink (machine-based)"></span></label>
            <label class="choice"><input type="radio" name="q4_type" value="medicinal"><span data-vi="D∆∞·ª£c li·ªáu / thu·ªëc ƒê√¥ng y" data-en="Herbal / medicinal product"></span></label>
            <label class="choice"><input type="radio" name="q4_type" value="coffee_machine"><span data-vi="Gi·ªëng c√† ph√™ (pha b·∫±ng m√°y)" data-en="Similar to coffee (machine-based)"></span></label>
            <label class="choice"><input type="radio" name="q4_type" value="hard"><span data-vi="Kh√≥ n√≥i" data-en="Hard to say"></span></label>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q5. B·∫°n th√≠ch u·ªëng‚Ä¶" data-en="Q5. Preferred serving"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q5_temp" value="hot" required><span data-vi="N√≥ng" data-en="Hot"></span></label>
            <label class="choice"><input type="radio" name="q5_temp" value="cold"><span data-vi="L·∫°nh / c√≥ ƒë√°" data-en="Cold / with ice"></span></label>
            <label class="choice"><input type="radio" name="q5_temp" value="either"><span data-vi="C√°ch n√†o c≈©ng ƒë∆∞·ª£c" data-en="Either is fine"></span></label>
          </div>
        </div>

        <h2 data-vi="PH·∫¶N B ‚Äì GI√Å & GI√Å TR·ªä" data-en="PART B ‚Äì PRICE & VALUE"></h2>
        <p class="small" data-vi="Ch·ªçn m·ª©c (kh√¥ng hi·ªÉn th·ªã s·ªë)." data-en="Pick a level (no numbers shown)."></p>

        <div class="q">
          <div class="q-title" data-vi="Q6. Qu√° r·∫ª ƒë·ªÉ tin t∆∞·ªüng (H√†n Qu·ªëc + ch·ª©ng nh·∫≠n)" data-en="Q6. Too cheap to trust (Korea + certification)"></div>
          <input type="hidden" name="q6_tooCheap" value="" required>
          <div class="scale">
            <button class="dot" type="button" data-scale="q6_tooCheap" data-value="1">1</button>
            <button class="dot" type="button" data-scale="q6_tooCheap" data-value="2">2</button>
            <button class="dot" type="button" data-scale="q6_tooCheap" data-value="3">3</button>
            <button class="dot" type="button" data-scale="q6_tooCheap" data-value="4">4</button>
            <button class="dot" type="button" data-scale="q6_tooCheap" data-value="5">5</button>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q7. Gi√° ƒë√°ng ti·ªÅn" data-en="Q7. Good value"></div>
          <input type="hidden" name="q7_goodValue" value="" required>
          <div class="scale">
            <button class="dot" type="button" data-scale="q7_goodValue" data-value="1">1</button>
            <button class="dot" type="button" data-scale="q7_goodValue" data-value="2">2</button>
            <button class="dot" type="button" data-scale="q7_goodValue" data-value="3">3</button>
            <button class="dot" type="button" data-scale="q7_goodValue" data-value="4">4</button>
            <button class="dot" type="button" data-scale="q7_goodValue" data-value="5">5</button>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q8. H∆°i ƒë·∫Øt nh∆∞ng v·∫´n mua" data-en="Q8. Expensive but acceptable"></div>
          <input type="hidden" name="q8_expOk" value="" required>
          <div class="scale">
            <button class="dot" type="button" data-scale="q8_expOk" data-value="1">1</button>
            <button class="dot" type="button" data-scale="q8_expOk" data-value="2">2</button>
            <button class="dot" type="button" data-scale="q8_expOk" data-value="3">3</button>
            <button class="dot" type="button" data-scale="q8_expOk" data-value="4">4</button>
            <button class="dot" type="button" data-scale="q8_expOk" data-value="5">5</button>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q9. Qu√° ƒë·∫Øt, kh√¥ng mua" data-en="Q9. Too expensive to buy"></div>
          <input type="hidden" name="q9_tooExp" value="" required>
          <div class="scale">
            <button class="dot" type="button" data-scale="q9_tooExp" data-value="1">1</button>
            <button class="dot" type="button" data-scale="q9_tooExp" data-value="2">2</button>
            <button class="dot" type="button" data-scale="q9_tooExp" data-value="3">3</button>
            <button class="dot" type="button" data-scale="q9_tooExp" data-value="4">4</button>
            <button class="dot" type="button" data-scale="q9_tooExp" data-value="5">5</button>
          </div>
        </div>

        <h2 data-vi="PH·∫¶N C ‚Äì MUA H√ÄNG" data-en="PART C ‚Äì BUYING"></h2>

        <div class="q">
          <div class="q-title" data-vi="Q10. N·∫øu gi√° ph√π h·ª£p, b·∫°n s·∫Ω u·ªëng‚Ä¶" data-en="Q10. If price fits, you would drink‚Ä¶"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q10_freq" value="daily" required><span data-vi="M·ªói ng√†y" data-en="Daily"></span></label>
            <label class="choice"><input type="radio" name="q10_freq" value="2_3wk"><span data-vi="2‚Äì3 l·∫ßn / tu·∫ßn" data-en="2‚Äì3 times/week"></span></label>
            <label class="choice"><input type="radio" name="q10_freq" value="1wk"><span data-vi="1 l·∫ßn / tu·∫ßn" data-en="Once a week"></span></label>
            <label class="choice"><input type="radio" name="q10_freq" value="occasion"><span data-vi="Th·ªânh tho·∫£ng" data-en="Occasionally"></span></label>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q11. B·∫°n th√≠ch mua‚Ä¶" data-en="Q11. You prefer to buy‚Ä¶"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q11_pack" value="single" required><span data-vi="T·ª´ng vi√™n" data-en="Single capsules"></span></label>
            <label class="choice"><input type="radio" name="q11_pack" value="box10"><span data-vi="H·ªôp 10 vi√™n" data-en="Box of 10"></span></label>
            <label class="choice"><input type="radio" name="q11_pack" value="box30"><span data-vi="H·ªôp 30 vi√™n" data-en="Box of 30"></span></label>
            <label class="choice"><input type="radio" name="q11_pack" value="gift"><span data-vi="üéÅ H·ªôp l√†m qu√† bi·∫øu" data-en="üéÅ Gift box"></span></label>
          </div>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q12. B·∫°n tin t∆∞·ªüng mua nh·∫•t ·ªü ƒë√¢u?" data-en="Q12. Where would you trust buying most?"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q12_channel" value="pharmacy" required><span data-vi="Nh√† thu·ªëc" data-en="Pharmacy"></span></label>
            <label class="choice"><input type="radio" name="q12_channel" value="supermarket"><span data-vi="Si√™u th·ªã" data-en="Supermarket"></span></label>
            <label class="choice"><input type="radio" name="q12_channel" value="social"><span data-vi="Facebook / Zalo" data-en="Facebook / Zalo"></span></label>
            <label class="choice"><input type="radio" name="q12_channel" value="website"><span data-vi="Website ch√≠nh th·ª©c" data-en="Official website"></span></label>
            <label class="choice"><input type="radio" name="q12_channel" value="healthstore"><span data-vi="C·ª≠a h√†ng s·ª©c kh·ªèe" data-en="Health store"></span></label>
          </div>
        </div>

        <h2 data-vi="PH·∫¶N D ‚Äì T√ôY CH·ªåN" data-en="PART D ‚Äì OPTIONAL"></h2>

        <div class="q">
          <div class="q-title" data-vi="Q13. B·∫°n hi·ªán l√†m‚Ä¶" data-en="Q13. Your current situation‚Ä¶"></div>
          <div class="choices">
            <label class="choice"><input type="radio" name="q13_work" value="office"><span data-vi="Nh√¢n vi√™n vƒÉn ph√≤ng" data-en="Office / white-collar"></span></label>
            <label class="choice"><input type="radio" name="q13_work" value="self"><span data-vi="T·ª± kinh doanh" data-en="Self-employed"></span></label>
            <label class="choice"><input type="radio" name="q13_work" value="student"><span data-vi="Sinh vi√™n" data-en="Student"></span></label>
            <label class="choice"><input type="radio" name="q13_work" value="home"><span data-vi="N·ªôi tr·ª£" data-en="Homemaker"></span></label>
            <label class="choice"><input type="radio" name="q13_work" value="other"><span data-vi="Kh√°c" data-en="Other"></span></label>
          </div>
          <p class="small" data-vi="Kh√¥ng b·∫Øt bu·ªôc" data-en="Optional"></p>
        </div>

        <div class="q">
          <div class="q-title" data-vi="Q14. Chi cho s·ª©c kh·ªèe m·ªói th√°ng" data-en="Q14. Monthly health spending"></div>
          <input type="hidden" name="q14_spend" value="">
          <div class="scale">
            <button class="dot" type="button" data-scale="q14_spend" data-value="1">1</button>
            <button class="dot" type="button" data-scale="q14_spend" data-value="2">2</button>
            <button class="dot" type="button" data-scale="q14_spend" data-value="3">3</button>
            <button class="dot" type="button" data-scale="q14_spend" data-value="4">4</button>
          </div>
          <p class="small" data-vi="Kh√¥ng b·∫Øt bu·ªôc" data-en="Optional"></p>
        </div>

        <div class="footer">
          <button class="btn" type="submit" data-vi="G·ª≠i" data-en="Submit"></button>
        </div>

      </form>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    Ginseng.initLangButtons();
    Ginseng.renderI18n();

    document.querySelectorAll("[data-scale]").forEach(btn => {
      btn.addEventListener("click", () => Ginseng.setScale(btn.dataset.scale, btn.dataset.value));
    });

    document.getElementById("surveyForm").addEventListener("submit", (e) => {
      e.preventDefault();

      const data = Ginseng.collectForm();

      const missing = ["q6_tooCheap","q7_goodValue","q8_expOk","q9_tooExp"].filter(k => !data[k]);
      if (missing.length) {
        alert(Ginseng.t({vi:"Vui l√≤ng ch·ªçn ƒë·ªß ph·∫ßn gi√° (Q6‚ÄìQ9).", en:"Please answer the price scale (Q6‚ÄìQ9)."}));
        return;
      }

      const payload = {
        id: Ginseng.uuid(),
        ts: new Date().toISOString(),
        lang: localStorage.getItem("ginseng_lang") || "vi",
        params: Object.fromEntries(new URLSearchParams(window.location.search).entries()),
        answers: data
      };

      Ginseng.saveResponse(payload);
      console.log("Saved response:", payload);

      window.location.href = "thanks.html?" + Ginseng.keepParams({rid: payload.id});
    });
  </script>
</body>
</html>
